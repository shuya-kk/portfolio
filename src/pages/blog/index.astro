---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import BlogCard from "../../components/BlogCard.astro";
import SectionHeader from "../../components/SectionHeader.astro";

const allPosts = await getCollection("blog");
const sortedPosts = allPosts.sort(
    (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime(),
);
---

<Layout title="Blog | Shuya Komiya">
    <main class="relative z-10 pt-32 pb-20">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-20">
                <h1
                    class="text-4xl sm:text-6xl font-black tracking-widest mb-6 animate-fade-in-up font-serif text-wafu-text"
                >
                    思考の全記録
                </h1>
                <p
                    class="text-lg text-wafu-text-muted max-w-2xl mx-auto animate-fade-in-up font-sans tracking-wider"
                    style="animation-delay: 0.1s;"
                >
                    開発の旅路で得た知見、チュートリアル、<br
                    />そして最新情報の記録。
                </p>
            </div>

            <div
                class="space-y-8 animate-fade-in-up"
                style="animation-delay: 0.2s;"
            >
                {
                    sortedPosts.map((post) => (
                        <BlogCard
                            title={post.data.title}
                            date={post.data.pubDate}
                            slug={post.slug}
                            tags={post.data.tags}
                        />
                    ))
                }
            </div>

            {
                sortedPosts.length === 0 && (
                    <p class="text-center text-lg text-wafu-text-muted mt-10 font-serif">
                        記事が見つかりません。
                    </p>
                )
            }
        </div>
    </main>
</Layout>
