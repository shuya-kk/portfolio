---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import BlogCard from "../../components/BlogCard.astro";
import SectionHeader from "../../components/SectionHeader.astro";

const allPosts = await getCollection("blog");
const sortedPosts = allPosts.sort(
    (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime(),
);
---

<Layout title="記録">
    <div class="max-w-4xl mx-auto px-8 py-32">
        <div class="mb-32">
            <SectionHeader title="記録" subtitle="開発と思索" />
            <p
                class="text-center text-zen-dim serif-sub max-w-xl mx-auto mt-[-2rem] leading-relaxed"
            >
                iOS開発、デザイン哲学、そしてデジタルなものづくりへの<br
                    class="hidden md:block"
                />探求についての備忘録です。
            </p>
        </div>

        <div class="space-y-6">
            {
                sortedPosts.map((post) => (
                    <BlogCard
                        title={post.data.title}
                        date={post.data.pubDate}
                        slug={post.slug}
                        tags={post.data.tags}
                    />
                ))
            }
        </div>

        {
            sortedPosts.length === 0 && (
                <div class="text-center py-24 zen-panel bg-white/50">
                    <p class="text-zen-dim serif-sub">
                        記事が見つかりませんでした。
                    </p>
                </div>
            )
        }
    </div>
</Layout>
